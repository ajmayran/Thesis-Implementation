{% load static %}
<aside class="sidebar">
    <div class="flex items-center mb-8">
        <div class="mr-3" style="background: rgba(255, 255, 255, 0.1); padding: 0.5rem; border-radius: 0.5rem;">
            <i class="fa-solid fa-user-graduate text-xl"></i>
        </div>
        <div>
            <h1>Social Work<br />Predictor</h1>
        </div>
    </div>

    <nav>
        <a href="{% url 'dashboard:home' %}" class="nav-item {% if request.resolver_match.url_name == 'home' %}active{% endif %}">
            <i class="fa-solid fa-house-chimney"></i>Dashboard
        </a>
        <a href="{% url 'prediction:admin_predict' %}" class="nav-item {% if request.resolver_match.url_name == 'predict' %}active{% endif %}">
            <i class="fa-solid fa-brain"></i>Predictions
        </a>
        <a href="{% url 'dashboard:reports' %}" class="nav-item {% if request.resolver_match.url_name == 'reports' %}active{% endif %}">
            <i class="fa-solid fa-chart-line"></i>Reports
        </a>
        <a href="{% url 'accounts:logout' %}" class="nav-item logout-trigger" style="color: #fca5a5;">
            <i class="fa-solid fa-right-from-bracket"></i>Logout
        </a>
    </nav>

    <div class="sidebar-footer">
        <div>Â© 2024 Thesis Project</div>
        <div class="mt-1">Version 1.0.0</div>
    </div>
</aside>

<!-- Logout Confirmation Modal -->
<div id="logoutModal" class="logout-modal hidden">
    <div class="logout-modal-backdrop"></div>
    <div class="logout-modal-content">
        <div class="logout-modal-header">
            <div class="logout-modal-icon">
                <i class="fa-solid fa-right-from-bracket"></i>
            </div>
            <div>
                <h2>Ready to sign out?</h2>
                <p>You can always log back in to continue where you left off.</p>
            </div>
        </div>
        <div class="logout-modal-actions">
            <button type="button" id="cancelLogout" class="btn-secondary">Stay logged in</button>
            <button type="button" id="confirmLogout" class="btn-danger">Log out</button>
        </div>
    </div>
</div>

<script>
    (function() {
        const modal = document.getElementById('logoutModal');
        const cancelBtn = document.getElementById('cancelLogout');
        const confirmBtn = document.getElementById('confirmLogout');
        let pendingLogoutUrl = null;

        function openModal(url) {
            pendingLogoutUrl = url;
            if (modal) {
                modal.classList.remove('hidden');
            }
        }

        function closeModal() {
            pendingLogoutUrl = null;
            if (modal) {
                modal.classList.add('hidden');
            }
        }

        document.addEventListener('click', function(e) {
            const target = e.target.closest('.logout-trigger');
            if (!target) return;
            e.preventDefault();
            openModal(target.getAttribute('href'));
        });

        if (cancelBtn) {
            cancelBtn.addEventListener('click', function() {
                closeModal();
            });
        }

        if (confirmBtn) {
            confirmBtn.addEventListener('click', function() {
                if (pendingLogoutUrl) {
                    window.location.href = pendingLogoutUrl;
                }
            });
        }

        const backdrop = document.querySelector('.logout-modal-backdrop');
        if (backdrop) {
            backdrop.addEventListener('click', function() {
                closeModal();
            });
        }
    })();
</script>